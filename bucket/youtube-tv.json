{
    "version": "1.0.0",
    "description": "Launches the default Chromium-based browser in Android TV mode (YouTube TV)",
    "homepage": "https://www.youtube.com/tv",
    "license": "MIT",
    "notes": "Creates a shortcut in the Scoop app directory that opens YouTube TV in Chromium TV mode.",
     "shortcuts": [
        [
            "Youtube Tv.lnk",
            "Youtube Tv"
        ]
    ],
    "installer": {
        "script": [
            "$ErrorActionPreference = 'Stop'",
            "",
            "# Resolve default browser",
            "$progId = (Get-ItemProperty 'HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice').ProgId",
            "$browserCmd = (Get-Item \"Registry::HKEY_CLASSES_ROOT\\$progId\\shell\\open\\command\").GetValue('')",
            "",
            "if (-not $browserCmd) { throw 'Could not determine default browser.' }",
            "",
            "if ($browserCmd -match '\"([^\"]+\\.exe)\"') {",
            "    $browserExe = $Matches[1]",
            "} else {",
            "    $browserExe = $browserCmd.Split(' ')[0]",
            "}",
            "",
            "if (-not (Test-Path $browserExe)) { throw 'Browser executable not found.' }",
            "",
            "# Shortcut path (Scoop app directory)",
            "$lnkPath = Join-Path $original_dir 'youtube-tv.lnk'",
            "",
            "# Launch arguments",
            "$args = @(",
            "  '--start-fullscreen',",
            "  '--force-device-scale-factor=1',",
            "  '--disable-notifications',",
            "  '--no-first-run',",
            "  '--no-default-browser-check',",
            "  '--user-agent=\"Mozilla/5.0 (Linux; Android 11; Android TV) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\"',",
            "  'https://www.youtube.com/tv'",
            ") -join ' '",
            "",
            "# Create shortcut",
            "$wsh = New-Object -ComObject WScript.Shell",
            "$sc = $wsh.CreateShortcut($lnkPath)",
            "$sc.TargetPath = $browserExe",
            "$sc.Arguments = $args",
            "$sc.WorkingDirectory = Split-Path $browserExe",
            "$sc.IconLocation = \"$browserExe,0\"",
            "$sc.Save()"
        ]
    },
    "uninstaller": {
        "script": [
            "$lnk = Join-Path $original_dir 'youtube-tv.lnk'",
            "if (Test-Path $lnk) { Remove-Item $lnk -Force }"
        ]
    },
    "bin": []
}
